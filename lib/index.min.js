module.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.r(t),i.d(t,"default",(function(){return s}));class s{constructor({container:e,layout:t,item:i}){n(this,"_containerElement",null),n(this,"_layoutElements",null),n(this,"_currentLayoutElement",null),n(this,"_moveElement",null),n(this,"_resizeElement",null),n(this,"_currentItemElement",null),n(this,"_status",null),n(this,"_mouse_status",null),n(this,"_resize_type",null),n(this,"_zIndex",0),n(this,"_zoom",1),n(this,"_move_direction",{h:"left",v:"top"}),n(this,"_init",()=>{this._containerElement=document.querySelector(this._containerSelector),this._layoutElements=document.querySelectorAll(this._layoutSelector),this._containerElement.addEventListener("mousedown",this._mousedown),this._containerElement.addEventListener("mousemove",this._mousemove),document.body.addEventListener("mouseup",e=>{this._clearStatus()}),this._containerElement.addEventListener("mouseleave",e=>{this._clearStatus()})}),n(this,"_clearStatus",()=>{this._moveElement=null,this._status=null,this._mouse_status=null,this._currentItemElement=null,this._resize_type=null,this._auxiliary_line_x&&document.body.removeChild(this._auxiliary_line_x),this._auxiliary_line_x=null,this._auxiliary_line_y&&document.body.removeChild(this._auxiliary_line_y),this._auxiliary_line_y=null,this._move_direction.h="left",this._move_direction.v="top"}),n(this,"_mousemove",e=>{if("down"!==this._mouse_status&&this._checkarea(e),"down"===this._mouse_status){if("resize"===this._status){if("nwse-resize"===this._currentItemElement.style.cursor){let t=e.pageX-this._resizeElement.getBoundingClientRect().left+5,i=e.pageY-this._resizeElement.getBoundingClientRect().top+5;this._currentItemElement.style.width=t/this._zoom+"px",this._currentItemElement.style.height=i/this._zoom+"px",this._handleResize({height:i,width:t})}if("ew-resize"===this._currentItemElement.style.cursor){let t=e.pageX-this._resizeElement.getBoundingClientRect().left+5;this._currentItemElement.style.width=t/this._zoom+"px",this._handleResize({height:this._resizeElement.offsetHeight,width:t})}if("ns-resize"===this._currentItemElement.style.cursor){let t=e.pageY-this._resizeElement.getBoundingClientRect().top+5;this._currentItemElement.style.height=t/this._zoom+"px",this._handleResize({width:this._resizeElement.offsetWidth,height:t})}}if("move"===this._status){let t=this._currentLayoutElement.getBoundingClientRect().left,i=this._currentLayoutElement.getBoundingClientRect().top,{pageX:n,pageY:s}=e,l=n-t,o=s-i+this._currentLayoutElement.scrollTop,r=l-this._mouse_item_left,h=o-this._mouse_item_top,_=r<=this._max_item_left?r>=0?r:0:this._max_item_left,u=h>=0?h:0;this._moveElement.style.left.replace("px","")<_/this._zoom?this._move_direction.h="right":this._moveElement.style.left.replace("px","")>_/this._zoom&&(this._move_direction.h="left"),this._auxiliary_line_x.style.left=this._moveElement.getBoundingClientRect().left+("right"===this._move_direction.h?this._moveElement.getBoundingClientRect().width:0)+"px",this._moveElement.style.top.replace("px","")<u/this._zoom?this._move_direction.v="bottom":this._moveElement.style.top.replace("px","")>u/this._zoom&&(this._move_direction.v="top"),this._moveElement.style.left=_/this._zoom+"px",this._moveElement.style.top=u/this._zoom+"px",this._auxiliary_line_y.style.top=this._moveElement.getBoundingClientRect().top+("bottom"===this._move_direction.v?this._moveElement.getBoundingClientRect().height:0)+"px",this._handleDrag({left:_,top:u})}}}),n(this,"_mousedown",e=>{switch(console.log("e.pageX :>> ",e.pageX),e.which){case 1:console.log("左键 :>> ");break;case 2:console.log("滚动键 :>> ");break;case 3:console.log("右键 :>> ")}if(this._is_in_item(e)){this._mouse_status="down";const t=this._layoutElements;for(let e=0;e<t.length;e++){const i=t[e],n=this._currentItemElement.parentNode;for(;!n&&!n.className.includes(this._layoutSelector.substr(1));)n=n.parentNode;i===n&&(this._currentLayoutElement=i)}this._handleMousedown(e)}}),n(this,"_create_auxiliary_line",()=>{const e=document.createElement("div");e.id="auxiliary_line_x",e.style.width="1px",e.style.height="100%",e.style.position="fixed",e.style.top="0",e.style.borderRight="1px dashed #ccc",document.body.appendChild(e),this._auxiliary_line_x=e;const t=document.createElement("div");t.id="auxiliary_line_y",t.style.height="1px",t.style.width="100%",t.style.position="fixed",e.style.left="0",t.style.borderBottom="1px dashed #ccc",document.body.appendChild(t),this._auxiliary_line_y=t}),n(this,"_handleMousedown",e=>{const t=this._currentItemElement.getBoundingClientRect();if(this._currentItemElement.style.zIndex=++this._zIndex,t.left+t.width-e.pageX<=10||t.top+t.height-e.pageY<=10)this._status="resize",this._resizeElement=this._currentItemElement;else{this._status="move",this._moveElement=this._currentItemElement,this._create_auxiliary_line();let{pageX:i,pageY:n}=e;this._mouse_item_left=i-t.left,this._mouse_item_top=n-t.top,this._max_item_left=this._currentLayoutElement.offsetWidth-this._moveElement.offsetWidth}}),n(this,"_is_in_item",e=>{const t=document.querySelectorAll(this._itemSelector);for(let i=0;i<t.length;i++){const n=t[i];if(n.contains(e.target)){let t=n.querySelector(this._layoutSelector);if(t&&t!==e.target&&t.contains(e.target))continue;return this._currentItemElement=n,!0}}return this._currentItemElement=null,!1}),n(this,"_checkarea",e=>{if(this._is_in_item(e)){let{pageX:t,pageY:i}=e;const n=this._currentItemElement.getBoundingClientRect();if(n.left+n.width-t<=10&&n.top+n.height-i<=10)return this._currentItemElement.style.cursor="nwse-resize","nwse-resize";if(n.left+n.width-t<=10)return this._currentItemElement.style.cursor="ew-resize","ew-resize";if(n.top+n.height-i<=10)return this._currentItemElement.style.cursor="ns-resize","ns-resize";this._currentItemElement.style.cursor=""}}),n(this,"_handleDrag",()=>{}),n(this,"_handleResize",()=>{}),n(this,"on",(e,t)=>{"drag"===e&&(this._handleDrag=t),"resize"===e&&(this._handleResize=t)}),n(this,"setZoom",e=>{this._zoom=e}),this._containerSelector=e,this._layoutSelector=t,this._itemSelector=i,this._init()}}}]);